<!DOCTYPE HTML>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>TransformJS - 3D and 2D Transforms</title>

    <link href="/stylesheets/shCore.css" rel="stylesheet" type="text/css">
    <link href="/stylesheets/shThemeDefault.css" rel="stylesheet" type="text/css">
    <link rel="stylesheet" type="text/css" href="/stylesheets/stylesheet.css" media="screen">

    <style>
      .syntaxhighlighter {
        overflow-y: hidden !important;
      }
    </style>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js" type="text/javascript"></script>
    <script src="javascript/transformjs.js" type="text/javascript"></script>
    <meta name="generator" content="nanoc 3.2.0a3">
  </head>
  <body>
    <div class="container">
      <h1 id="transformjs-10-beta">TransformJS 1.0 Beta</h1>

<h3 id="d-and-3d-transforms-as-regular-css-properties-you-can-set-using-css-and-animate-using-animate">2D and 3D transforms as regular CSS properties you can set using <code>.css()</code> and animate using <code>.animate()</code></h3>

<div id="sections" class="clearfix">
  <div class="section">
    <h4><a href="http://www.github.com/sproutcore/transformjs/downloads">Download</a></h4>
    <p>
      Download current and previous versions of TransformJS 
    </p>
  </div>
  <div class="section">
    <h4><a href="http://www.github.com/sproutcore/transformjs/issues">Report Bugs</a></h4>
    <p>
      Download current and previous versions of TransformJS 
    </p>
  </div>
</div>

<h2 id="demo">Demo</h2>

<div id="demobox" class="clearfix">
  <div id="code">
    <div class="code_container">
<pre class="brush: javascript; gutter: false; toolbar: false">

      $(document).ready(function() {
        $('#forward').click(function() {
          $('#test').animate({
            translateX:'+=150',
            translateY:'+=150',
            scale:'+=2',
            rotateY: '+=6.24',
            rotateX: '+=3.15',
            rotateZ: '+=3.15'
          },1500);    
        });  

        $('#backward').click(function() {
          $('#test').animate({
            translateX:'-=150',
            translateY:'-=150',
            scale:'-=2',
            rotateY: '-=6.24',
            rotateX: '-=3.15',
            rotateZ: '-=3.15'
          },1500);
        })
      });
    </pre></div>
  </div>
  <div id="preview">
    <button id="forward" class="btn large">Run Animation Forward</button>
    <button id="backward" class="btn large">Run Animation backwards</button>
    <img id="test" src="images/demo.jpg" />
  </div>
</div>

<h2 id="overview">Overview</h2>

<p>CSS Transforms allow you to specify 2D or 3D transformations where
available to an HTML element. They are commonly used to add effects to
elements and also commonly used with transitions. They were first
introduced in WebKit in 2007, and have now reached mass-adoption by all
the major browswer vendors. </p>

<p>The API however, does not scale to complex applications which require 
intricate and complex management of transformations. TransformJS
attempts to identify and address these problems, allowing developers to
make use of transforms without having to be encumbered by cross browser
issues, and low-level APIs.</p>

<p>Here’s a snippet of code that uses TransformJS to apply multiple 3d
transformations to the same element, relative to their current value,
and animate the changes:</p>

<div class="code_container">
<pre class="brush: javascript; gutter: false; toolbar: false">

    $('#test').animate({
      translateY:'+=150',
      scale:'+=2',
      rotateY: '+=6.24',
      rotateX: '+=3.15',
      rotateZ: '+=3.15'
    },1500);    
  </pre></div>

<p><code>Note:</code> 3D properties do not work in browsers that do not support them, 
and TransformJS will only apply 2D properties. See the “Browser Support”
section for more information.</p>

<h2 id="browser-support">Browser Support</h2>

<p>TransformJS supports all major browsers: Safari, Chrome, Firefox,
and IE. However, since all browsers don’t share the same featureset,
TransformJS will make its best attempt at using the best feature
available. The table below outlines which properties are supported on
which browser. If a property is supported on more than one browser, 3d
will be prefered to 2d, and 2d will be prefered to filter transforms.</p>

<table class="zebra-striped">
    <thead>
      <tr>
        <th />
        <th>3D Support</th>
        <th>2D Support</th>
        <th>Filter Support</th>
      </tr>
    </thead>
      <tr>
        <td>rotateX</td>
        <td>&#x2714;</td>
        <td />
        <td />
      </tr>
      <tr>
        <td>rotateY</td>
        <td>&#x2714;</td>
        <td />
        <td />
      </tr>
      <tr>
        <td>rotateZ</td>
        <td>&#x2714;</td>
        <td>&#x2714;</td>
        <td>&#x2714;</td>
      </tr>
      <tr>
        <td>translateX</td>
        <td>&#x2714;</td>
        <td>&#x2714;</td>
        <td>&#x2714; *</td>
      </tr>
      <tr>
        <td>translateY</td>
        <td>&#x2714;</td>
        <td>&#x2714;</td>
        <td>&#x2714; *</td>
      </tr>
      <tr>
        <td>translateZ</td>
        <td>&#x2714;</td>
        <td />
        <td />
      </tr>
      <tr>
        <td>scale</td>
        <td>&#x2714;</td>
        <td>&#x2714;</td>
        <td>&#x2714;</td>
      </tr>
    <tbody>

    </tbody>
  </table>

<p>* Since IE does not support translation transformations,
TransformJS will instead apply them to the <code>top</code> and <code>left</code> properties
which means the element must have <code>position: absolute</code> set.</p>

<h2 id="the-problems">The Problems</h2>

<p>The following outlines the problems that TransformJS tries to solve,
and outlines the ways in which it solves them. </p>

<h4 id="cross-browser-support">Cross Browser Support</h4>

<p>Transforms have yet to be adopted by all the major browser vendors as
non-proprietary CSS properties. This means that to apply a 10x10 px
translation to an element involves 5 properties: </p>

<div class="code_container">
<pre class="brush: javascript; gutter: false; toolbar: false">

    $('#test').css({
      '-webkit-transform': 'translate(10px,10px)',
      '-moz-transform': 'translate(10px,10px)',
      '-o-transform': 'translate(10px,10px)',
      '-ms-transform': 'translate(10px,10px)',
      'transform': 'translate(10px,10px)'
    });
  </pre></div>

<p>Clearly, setting that property as a string and maintaining it is
prohibitively expensive, and most people don’t even bother with Mozilla, 
Opera, and IE support.  </p>

<h4 id="multiple-transforms">Multiple Transforms</h4>

<p>Setting multiple transforms on the same element involves packing
multiple transforms to the same CSS property. Once the values you are
setting to your transforms become dynamic, setting a property begins to
involve fickle string manipulation:</p>

<div class="code_container">
<pre class="brush: javascript; gutter: false; toolbar: false">

    $('#test').css({
      '-webkit-transform': 'translate('+tX+'px,'+tY+'px) scale('+sX+','+sY+')',
      '-moz-transform': 'translate('+tX+'px,'+tY+'px) scale('+sX+','+sY+')',
      '-o-transform': 'translate('+tX+'px,'+tY+'px) scale('+sX+','+sY+')',
      '-ms-transform': 'translate('+tX+'px,'+tY+'px) scale('+sX+','+sY+')',
      'transform': 'translate('+tX+'px,'+tY+'px) scale('+sX+','+sY+')'
    });
  </pre></div>

<h4 id="data-consistency">Data Consistency</h4>

<p>If multiple classes in your application are affecting the display of
an element at once, you may run into consistency issues. For example, if
the animation library is animating the translation in the z-axis, while
your touch library is updating the translation in the x and y axis, they
will be overriding the same CSS string and have to write boilerplate to
ensure there’s no jerking.</p>

<h2 id="the-solution">The Solution</h2>

<h4 id="feature-detection">Feature Detection</h4>

<p>To solve the cross-browser support problem, TransformJS uses feature 
detection to analyze the supported features of the browser it is running in 
and adapts accordingly. For example, if you apply a <code>rotateY</code> transform to 
an element in Safari or Chrome, it will apply it as a 3D-transformation so 
it can take advantage of hardware-acceleration. However, on Firefox or Opera, 
it will apply a 2D transformation, and on IE, it will fallback to applying a 
transformation Filter.</p>

<h4 id="css-hooks">CSS Hooks</h4>

<p>To solve the multiple transforms problem, TransformJS applies a cssHook for 
every transformation exposing them to <code>.css()</code> and <code>.animate()</code>. This
allows you to treat them as separate properties, rather than a single
one, and also allows you to more easily set a computed value to them.</p>

<h4 id="in-memory-matrix">In-Memory Matrix</h4>

<p>To solve the data consistency problem, TransformJS maintains an
in-memory matrix which it uses to apply the transforms. This
single-entry system ensures that all parts of your applications that
want to apply a transformation to an element can do so without any
regard to what other transformations have already been applied.</p>

<p><a href="#">Back to top</a></p>

    </div>
    <!--<script>SyntaxHighlighter.all();</script>-->
    <script type="text/javascript">
      $(document).ready(function() {
        $('#forward, img#test').click(function() {
          $('#test').animate({
            translateX:'+=150',
            translateY:'+=150',
            scale:'+=2',
            rotateY: '+=6.24',
            rotateX: '+=3.15',
            rotateZ: '+=3.15'
          },1500);    
        });  

        $('#backward').click(function() {
          $('#test').animate({
            translateX:'-=150',
            translateY:'-=150',
            scale:'-=2',
            rotateY: '-=6.24',
            rotateX: '-=3.15',
            rotateZ: '-=3.15'
          },1500);
        })
      });
    </script>
  </body>
</html>
